<h2><span style="color: rgb(0, 51, 0);"><strong>Physics Based AC Motor</strong></span></h2>

<h3><strong><span style="color: rgb(0, 0, 255);">Block Description</span></strong></h3>
<p>This block represents a generic permanent magnet synchronous motor whose electrical performance is calculated in dq0 space. The motor's performance is dictated by the commanded torque and speed setpoints, as well as the line input voltage.&nbsp; All of the performance calculations and state space conversions are contained inside the block, and the related inverter block provides realistic efficiency losses rather than calculate any specific waveforms.</p><p></p>This model was based on sources from <a href="https://cdn.intechopen.com/pdfs/41486/InTech-Modeling_of_full_electric_and_hybrid_electric_vehicles.pdf">Intech</a> and <a href="https://ieeexplore.ieee.org/document/8123234/">IEEE</a>.<br><h3><strong><span style="color: rgb(0, 0, 255);">Mask Parameters</span></strong></h3>
<table border="5">
<tbody>
<tr>
<td>pp</td>
<td>Number of poles
  in motor divided by 2</td>
</tr>
<tr>
<td>flux_m</td>
<td>Permanent
  magnet flux linkage (Weber)</td>
</tr>
<tr>
<td>R_s</td>
<td>Resistance
  of stator winding (Ohms)</td>
</tr>
<tr>
<td>L_s</td>
<td>Inductance
  of stator winding (H)</td>
</tr>
<tr>
<td>P_Fe_Nom</td>
<td>Iron
  losses at nominal speed on spec. sheet (W)</td>
</tr>
<tr>
<td>S_nom</td>
<td>Nominal
  speed for specifications (RPM)</td>
</tr>
<tr>
<td>T_nom</td>
<td>Nominal
  torque (Nm)</td>
</tr>
<tr>
<td>P_out_max</td>
<td>Maximum output
  power (W)</td>
</tr>
<tr>
<td>I_max</td>
<td>Maximum current
  through motor (A)</td>
</tr>
<tr>
<td>P_in_max</td>
<td>Maximum input power (W)</td>
</tr>
<tr>
<td>T_max</td>
<td>Maximum
  allowable torque (Nm)</td>
</tr>
</tbody>
</table>
<h3><strong><span style="color: rgb(0, 0, 255);">Input Variables</span></strong></h3>
<table border="5">
<tbody>
<tr>
<td>T_ref</td>
<td>Load torque
  (Nm)</td>
</tr>
<tr>
<td>S_mech</td>
<td>Speed (RPM)</td>
</tr>
<tr>
<td>V_batt</td>
<td>DC power source
  voltage</td>
</tr>


</table>
<h3><strong><span style="color: #0000ff;">Run Script Inputs: Catatrophic Fault Toggle ( 0 = not faulted OR 1 = faulted )</span></strong></h3>
<table border="5">  
<tr>
<td>mot_catastrophic_fault_toggle</td>
<td>Motor Fault Toggle</td>
</tr>
</tbody>

</table>
<h3><strong><span style="color: #0000ff;">Run Script Inputs: Degradation Input ( > 0.0 )</span></strong></h3>
<table border="5">  
<tr>
<td>mot_degradation_input</td>
<td>Motor Degradation Input</td>
</tr>
</tbody>

</table>
<h3><strong><span style="color: #0000ff;">Run Script Inputs: Degradation-Driving Parameter Adjustment ( < 1.0 )</span></strong></h3>
<table border="5">  
<tr>
<td>mot_flux_m_adjustment</td>
<td>Parameter Adjustment for Magnetic Flux</td>
</tr>
<tr>
<td>mot_R_s_adjustment</td>
<td>Parameter Adjustment for Stator Resistance</td>
</tr>
<tr>
<td>mot_P_Fe_Nom_adjustment</td>
<td>Parameter Adjustment for Iron Losses at Nominal Speed</td>
</tr>
<tr>
<td>mot_S_nom_adjustment</td>
<td>Parameter Adjustment for Nominal Speed</td>
</tr>
</tbody>



</tbody>
</table>
<h3><strong><span style="color: rgb(0, 0, 255);">Output Variables</span></strong></h3>
<table border="5">
<tbody>
<tr>
<td>I<br></td>
<td>Phase current
  (RMS)</td>
</tr>
<tr>
<td>V_s</td>
<td>Stator
  voltage (V)</td>
</tr>
<tr>
<td>PF</td>
<td>Power
  factor</td>
</tr>
<tr>
<td>P_in_Motor</td>
<td>Input power to motor
  (W)</td>
</tr>
<tr>
<td>P_m</td>
<td>Power
  output by shaft (Torque*speed) (Nm)</td>
</tr><tr><td style="vertical-align: top;">f_elec</td><td style="vertical-align: top;">Electrical
  frequency (Hz)</td></tr><tr><td style="vertical-align: top;">w_elec</td><td style="vertical-align: top;">Angular electrical
  frequency (rad/s)</td></tr><tr><td style="vertical-align: top;">Err1</td><td style="vertical-align: top;">1 if I&gt;I_max, else
  0</td></tr><tr><td style="vertical-align: top;">Err2</td><td style="vertical-align: top;">1 if V_s &gt;
  (V_batt/sqrt(2)), else 0</td></tr><tr><td style="vertical-align: top;">Err3</td><td style="vertical-align: top;">1 if
  P_in_Motor&gt;P_in_max, else 0</td></tr><tr><td style="vertical-align: top;">eff</td><td style="vertical-align: top;">Efficiency of motor</td></tr><tr><td style="vertical-align: top;">T_EM</td><td style="vertical-align: top;">Electromagnetic
  torque produced by motor (Nm)</td></tr><tr><td style="vertical-align: top;">S_out</td><td style="vertical-align: top;">Output speed (passed
  through from S_mech) (RPM)</td></tr>
</tbody>
</table><br><h3><strong><span style="color: rgb(0, 0, 255);">iDesign Variables</span></strong></h3>
<table border="5">
<tbody>
<tr>
<td>Poles_i</td>
<td>Number of poles</td>
</tr>
<tr>
<td>R_s_i</td>
<td>Stator resistance
  (enter 0 to estimate), Ohm</td>
</tr>
<tr>
<td>L_s_i</td>
<td>Stator
  inductance(enter 0 to estimate), H</td>
</tr>
<tr>
<td>S_nom_i</td>
<td>Nominal Speed (RPM)</td>
</tr>
<tr>
<td>T_nom_i</td>
<td>Nominal Torque (Nm)</td>
</tr><tr>
      <td style="vertical-align: top;">P_out_max_I</td>
      <td style="vertical-align: top;">Max. output power (W)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">I_max_i</td>
      <td style="vertical-align: top;">Current limit (A)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">P_in_max_i</td>
      <td style="vertical-align: top;">Max. input power (W)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">K_i</td>
      <td style="vertical-align: top;">Back EMF constant
  (V/kRPM)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">V_nom_i</td>
      <td style="vertical-align: top;">Nominal voltage (V)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">T_max_i</td>
      <td style="vertical-align: top;">Maximum allowable
  torque (Nm)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">P_Fe_Nom_i</td>
      <td style="vertical-align: top;">Iron Loss at Nominal
  conditions (manual input) (W)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">I_nom_i</td>
      <td style="vertical-align: top;">Nominal current (for
  iron loss computation) (A)</td>
    </tr><tr><td style="vertical-align: top;">PF_nom_i</td><td style="vertical-align: top;">Nominal power factor
  (for iron loss computation)</td></tr><tr><td style="vertical-align: top;">P_Fe_Calc_Flag</td><td style="vertical-align: top;">Internal variable</td></tr>

</tbody>
</table><br>